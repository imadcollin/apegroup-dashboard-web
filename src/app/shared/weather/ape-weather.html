<link rel="import" href="../../../assets/libs/polymer/polymer.html">

<dom-module id="ape-weather">

    <template>

        <style>

            :host {
                position: relative;
                display: flex;
                width: 100%;
                height: 100%;
                flex-direction: column;
                padding: 1.6rem;
                justify-content: center;
                align-items: center;
                /*background: linear-gradient(to bottom right, red, yellow);*/
            }

            svg {
                height: 8.8rem;
                width: 8.8rem;
                margin-bottom: 1.6rem;
            }

            .location {
                font-size: 2.2rem;
                font-weight: 700;
                margin-bottom: .8rem;
            }

            .description {
                font-size: 1.6rem;
                font-weight: 500;
                margin-bottom: .8rem;
                text-align: center;
            }

            .temperature-current {
                position: absolute;
                left: 0;
                top: 0;
                font-size: 4.6rem;
                font-weight: 700;
                padding: 1.6rem;
            }

            .wind {
                font-size: 2.6rem;
                font-weight: 700;
            }

        </style>

        <?xml version="1.0" encoding="UTF-8" standalone="no"?>
        <svg viewBox="0 0 41 41" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <title>Sol</title>
            <desc>Sol</desc>
            <path class="path1" d="M20.336,12.843 C24.649,12.843 28.157,16.351 28.157,20.664 C28.157,24.977 24.649,28.486 20.336,28.486 C16.023,28.486 12.514,24.977 12.514,20.664 C12.514,16.352 16.023,12.843 20.336,12.843 L20.336,12.843 Z M20.336,31.614 C26.373,31.614 31.286,26.702 31.286,20.664 C31.286,14.626 26.373,9.714 20.336,9.714 C14.298,9.714 9.386,14.626 9.386,20.664 C9.386,26.702 14.298,31.614 20.336,31.614 L20.336,31.614 Z"></path>
            <path class="path2" d="M21.9,39.436 L21.9,34.073 C21.9,33.209 21.2,32.509 20.336,32.509 C19.472,32.509 18.771,33.209 18.771,34.073 L18.771,39.436 C18.771,40.3 19.472,41 20.336,41 C21.2,41 21.9,40.3 21.9,39.436"></path>
            <path class="path3" d="M20.336,8.82 C21.2,8.82 21.9,8.12 21.9,7.256 L21.9,1.892 C21.9,1.029 21.2,0.328 20.336,0.328 C19.472,0.328 18.771,1.029 18.771,1.892 L18.771,7.256 C18.771,8.12 19.472,8.82 20.336,8.82"></path>
            <path class="path4" d="M32.18,20.664 C32.18,21.528 32.88,22.228 33.743,22.228 L39.107,22.228 C39.971,22.228 40.672,21.528 40.672,20.664 C40.672,19.8 39.971,19.1 39.107,19.1 L33.743,19.1 C32.88,19.1 32.18,19.8 32.18,20.664"></path>
            <path class="path5" d="M1.565,22.228 L6.927,22.228 C7.791,22.228 8.491,21.528 8.491,20.664 C8.491,19.8 7.791,19.1 6.927,19.1 L1.565,19.1 C0.7,19.1 0,19.8 0,20.664 C0,21.528 0.7,22.228 1.565,22.228"></path>
            <path class="path6" d="M28.824,29.039 C28.213,29.65 28.213,30.641 28.824,31.251 L32.617,35.044 C32.922,35.349 33.323,35.502 33.723,35.502 C34.123,35.502 34.523,35.349 34.828,35.044 C35.44,34.433 35.44,33.443 34.828,32.832 L31.036,29.039 C30.426,28.428 29.436,28.428 28.824,29.039"></path>
            <path class="path7" d="M9.862,12.289 C10.168,12.594 10.568,12.747 10.968,12.747 C11.368,12.747 11.769,12.594 12.074,12.289 C12.685,11.678 12.685,10.688 12.074,10.077 L8.282,6.284 C7.67,5.673 6.681,5.673 6.07,6.284 C5.458,6.895 5.458,7.886 6.07,8.497 L9.862,12.289"></path>
            <path class="path8" d="M9.749,29.039 L5.956,32.832 C5.345,33.443 5.345,34.433 5.956,35.044 C6.262,35.349 6.662,35.502 7.062,35.502 C7.462,35.502 7.862,35.349 8.168,35.044 L11.96,31.251 C12.572,30.641 12.572,29.65 11.96,29.039 C11.35,28.428 10.36,28.428 9.749,29.039"></path>
            <path class="path9" d="M29.817,12.747 C30.217,12.747 30.617,12.594 30.923,12.289 L34.715,8.497 C35.326,7.886 35.326,6.895 34.715,6.284 C34.104,5.673 33.114,5.673 32.503,6.284 L28.711,10.077 C28.099,10.688 28.099,11.678 28.711,12.289 C29.017,12.595 29.417,12.747 29.817,12.747"></path>
        </svg>
        <div class="temperature-current">[[weatherData.temp.current]]Â°</div>
        <div class="location">[[weatherData.locationName]]</div>
        <div class="description">[[weatherData.description]]</div>
        <div class="wind">[[weatherData.wind.speed]] m/s</div>

    </template>

    <script>

        Polymer({

            is: `ape-weather`,

            properties: {
                weatherData: {
                    type: Object,
                    value: function() {
                        return {};
                    }
                },
                weatherRef: {
                    type: Object,
                    value: function() {
                        return {};
                    }
                },
            },

            attached() {
                // setup weather reference to weather node
                this.weatherRef = firebase.database().ref(`/weather`);
                this.weatherRef.on(`value`, data => this.weatherData = data.val());

                // this.listen(this, `dragstart`, `_listenerDragStart`);
            },

            detached() {
                // remove weather reference from weather node
                this.weatherRef.off();

                // this.unlisten(this, `dragstart`, `_listenerDragStart`);
            },

            /* Listeners */

            _listenerDragStart(event) {
                console.log(`Drag start ${event}`);
            },

        });

    </script>

</dom-module>