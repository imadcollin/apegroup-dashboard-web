<link rel="import" href="../../assets/libs/polymer/polymer.html">
<link rel="import" href="/src/config/config.html">

<dom-module id="ape-style-guide">

    <template>

        <style>
            :host {
                display: flex;
                flex-wrap: wrap;
                --card-shadow: 0 0.49rem 0.7rem 0rem rgba(0, 0, 0, 0.25);
                --name-height: 1.6 rem;
                --font-size-md: 1.6rem;
                font-family: inherit;
            }

            .card {
                box-shadow: var(--card-shadow);
                transition: 0.3s;
                width: 20%;
                height: 5%;
            }

            .card:hover {
                box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
            }

            .container {
                padding: 2px 16px;
                height: var(--name-height);
                font-size: var(--font-size-md);
                box-sizing: border-box;
            }
        </style>

        <template is="dom-repeat" items="{{users}}" as="user" sort="_sort">
            <div class="Cards">

            </div>

            <div class="card">
                <img src="[[user.imageURL]]" alt="Avatar" style="width:100%">
                <div class="container">
                    [[user.firstname]] [[user.lastname]]
                    <!--<p>[[user.email]]</p>-->

                </div>
            </div>
        </template>

    </template>
    <script>

    </script>
    <script>
        Polymer({

            is: `ape-style-guide`,

            behaviors: [
                `_userImages(user.imageURL)`
            ],

            properties: {
                users: {
                    type: Array,
                    value: function () {
                        return [];
                    }
                },
                userImage: {
                    type: String,
                    value: `fallback.png`//fallback image should be added
                },
                time: {
                    type: String,
                    value: function () {
                        function startTime() {
                            var today = new Date();
                            var h = today.getHours();
                            var m = today.getMinutes();
                            var s = today.getSeconds();
                            m = checkTime(m);
                            s = checkTime(s);


                            var t = setTimeout(startTime, 500);
                            console.log(h + ":" + m + ":" + s);
                            return h + ":" + m + ":" + s;
                        }
                        function checkTime(i) {
                            if (i < 10) { i = "0" + i };  // add zero in front of numbers < 10
                            return i;
                        }
                        let t = startTime();
                        return t;

                    }
                }

            },

            /* Life cycle */

            ready() {
            },

            attached() {

                var database = firebase.database();
                database.ref(`/users`).once(`value`).then((snapshot) => {
                    const items = snapshot.val();
                    this.users = Object.keys(items).map(key => items[key]);
                });


            },

            detached() {
            },

            _sort(a, b) {

                if (a.firstname === b.firstname) return 0;
                return a.firstname < b.firstname ? -1 : 1;
            },
            _userImages(userImage) {
                if (this.user.imageURL === `` || this.user.imagURL == undefined) {
                    this.user.imageURL == userImage;
                }
                else {
                    return 0;
                }

            },


        });
    </script>

</dom-module>